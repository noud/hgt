{% extends 'layout/base.html.twig' %}

{% block metaTitle %}{{ page.metaTitle }}{% endblock %}
{% block metaKeywords %}{{ page.metaKeywords }}{% endblock %}
{% block metaDescription %}{{ page.metaDescription }}{% endblock %}

{% block bodyClass %}cms-page{% endblock %}

{% block body %}

    {% if page.parent == null %}
        {% set pageMenu = page %}
    {% else %}
        {% set pageMenu = page.parent %}
    {% endif %}

    <div class="container">
        {{ include('_partials/page/breadcrumbs.html.twig') }}
        <aside class="sidebar col-md-3">
            {% if page.pageStaticBlocks|length > 0 or pageMenu.subPages|length > 0 %}
                <div class="block subpage">
                    <div class="block-title">
                        <a href="{{ path('page', {'id': pageMenu.id }) }}"><h2>{{ pageMenu.shortTitle }}</h2></a>
                    </div>
                    <div class="block-content cms-tekst">
                        {% for subPage in pageMenu.subPages %}
                            <li{% if app.request.get('id') == subPage.id %} class="active"{% endif %}>
                                <a href="{{ path('page', {'id': subPage.id}) }}">{{ subPage.shortTitle }}</a>
                            </li>
                        {% endfor %}
                    </div>
                </div>
                {% for pageStaticBlock in page.pageStaticBlocks %}
                    {% if static_block_manager.has(pageStaticBlock.staticBlock.identifier) %}
                        {% if(static_block_manager.get(pageStaticBlock.staticBlock.identifier).title) %}
                            <h2>x{{ static_block_manager.get(pageStaticBlock.staticBlock.identifier).title }}</h2>
                        {% endif %}
                        {% if(static_block_manager.get(pageStaticBlock.staticBlock.identifier).content) %}
                            {{ static_block_manager.get(pageStaticBlock.staticBlock.identifier).content|raw }}
                        {% endif %}
                    {% endif %}
                {% endfor %}
            {% endif %}
        </aside>
        <section class="content col-md-9{% if page.pageStaticBlocks|length == 0 and page.subPages|length == 0 %} full-width{% endif %}">
            <article>
                <header>
                    <h1>{{ page.title }}</h1>
                </header>
                <div class="content">
                    {{ page.content|raw }}
                </div>
                <div class="clear">&nbsp;</div>
            </article>
        </section>
    </div>
{% endblock %}
